(function(){"use strict";var e={7723:function(e,t,a){var r=a(144),s=a(3726),o=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t(s.Z,[t("router-view")],1)],1)},i=[],n=a(1001),l={},c=(0,n.Z)(l,o,i,!1,null,null,null),u=c.exports,d=a(154);r.ZP.use(d.Z);var h=new d.Z({}),m=a(8345),p=a(4643),g=a(9088),f=a(5449),v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"home center"},[e.$vuetify.breakpoint.mdAndUp?t("div",{staticClass:"planet"}):e._e(),t("div",{staticClass:"login ma-5"},[e.user?t(p.Z,{staticClass:"white--text text-h5 font-weight-bold",attrs:{text:""},on:{click:function(t){return t.stopPropagation(),e.profile.apply(null,arguments)}}},[t(g.Z,{staticClass:"mr-2",attrs:{large:""}},[e._v("mdi-account-check")]),e._v(" "+e._s(e.user)+" ")],1):t(p.Z,{staticClass:"white--text text-h5 font-weight-bold",attrs:{text:""},on:{click:function(t){return t.stopPropagation(),e.login.apply(null,arguments)}}},[t(g.Z,{staticClass:"mr-2",attrs:{large:""}},[e._v("mdi-account")]),e._v(" Log In ")],1)],1),t("div",{staticClass:"search"},[t(f.Z,{attrs:{filled:"",solo:"",dark:"",label:"Enter a location",id:"autocomplete","prepend-inner-icon":"mdi-map-marker"}})],1)])},w=[];a(7658);class y{constructor(){}static get(e){return localStorage.getItem(e)}static set(e,t){localStorage.setItem(e,t)}static remove(e){localStorage.removeItem(e)}static clear(){localStorage.clear()}static key(e){return localStorage.key(e)}}function _(e){const t=JSON.parse(localStorage.getItem("recentActivity"))||[];t.push(e),localStorage.setItem("recentActivity",JSON.stringify(t))}function b(){return JSON.parse(localStorage.getItem("recentActivity")).reverse()||[]}var k={name:"HomeView",data(){return{autocomplete:void 0,nearby:void 0,user:localStorage.getItem("username")}},created(){document.title="TravelApp"},async mounted(){await new Promise((e=>setTimeout((()=>e()),250))),this.autocomplete=new google.maps.places.Autocomplete(document.getElementById("autocomplete")),google.maps.event.addListener(this.autocomplete,"place_changed",(()=>{const e=this.autocomplete.getPlace(),t=e.geometry.location.lat(),a=e.geometry.location.lng();_({name:e.name,lat:t,lng:a}),y.set("Latitude",t),y.set("Longitude",a),y.set("Website",e.website),this.$router.push({name:"search"})}))},computed:{budget:{get(){return y.get("Budget")},set(e){y.set("Budget",e)}}},methods:{login(){this.$router.push({name:"login"})},profile(){this.$router.push({name:"profile"})}}},Z=k,x=(0,n.Z)(Z,v,w,!1,null,"551b03dd",null),C=x.exports,P=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page"},[t(p.Z,{staticStyle:{position:"absolute","z-index":"2"},attrs:{text:""},on:{click:function(t){return t.stopPropagation(),e.home.apply(null,arguments)}}},[t(g.Z,[e._v("mdi-arrow-left")]),e._v(" Home ")],1),t("MapComponent",{attrs:{id:"map"}}),t("WeatherCard",{attrs:{id:"weather"}}),e._m(0)],1)},S=[function(){var e=this,t=e._self._c;return t("p",{attrs:{id:"loc-site"}},[e._v("Visit the location's "),t("a",{attrs:{id:"site-link",target:"_blank"}},[e._v("website")])])}],$=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"map-render"}},[t("GmapMap",{staticStyle:{width:"99vw",height:"100vh"},attrs:{center:e.center,zoom:12,options:e.options}},e._l(e.markers,(function(a,r){return t("GmapMarker",{key:r,attrs:{position:a.position},on:{click:function(t){e.center=e.m.position}}})})),1)],1)},R=[],L={data(){return{center:{lat:0,lng:0},options:{zoomControl:!0,mapTypeControl:!1,scaleControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1},currentPlace:null,markers:[],places:[]}},mounted(){this.center={lat:Number(y.get("Latitude")),lng:Number(y.get("Longitude"))};let e=new google.maps.Map(document.getElementById("map-render")),t=new google.maps.places.PlacesService(e),a={location:new google.maps.LatLng(Number(y.get("Latitude")),Number(y.get("Longitude"))),radius:"1000",type:["restaurant"]};t.nearbySearch(a,((e,t)=>{if(console.log(`# Res: ${e.length}`),t==google.maps.places.PlacesServiceStatus.OK)for(let a=0;a<e.length;a++){let t=e[a];console.log(t)}}))},methods:{setPlace(e){this.currentPlace=e},addMarker(){if(this.currentPlace){const e={lat:this.currentPlace.geometry.location.lat(),lng:this.currentPlace.geometry.location.lng()};this.markers.push({position:e}),this.places.push(this.currentPlace),this.center=e,this.currentPlace=null}},geolocate(){navigator.geolocation.getCurrentPosition((e=>{this.center={lat:e.coords.latitude,lng:e.coords.longitude}}))}}},O=L,M=(0,n.Z)(O,$,R,!1,null,null,null),I=M.exports,B=a(3816),E=a(5255),N=a(3643),T=a(5536),A=function(){var e=this,t=e._self._c;return t("div",[t(B.Z,{attrs:{elevation:"2"}},[t(E.ZB,[t("div",{staticClass:"center text-h4"},[e._v(e._s(Math.round(e.weather.main.temp))+"째F")]),t("div",{staticClass:"center text-h6"},[e._v(" "+e._s(e.weather.weather[0].main)+" "),t(g.Z,[e._v(e._s(e.getIcon()))])],1)]),t(E.h7,[t(p.Z,{staticClass:"center",attrs:{color:"primary",small:"",text:""},on:{click:function(t){t.stopPropagation(),e.dialog=!0}}},[e._v(" More ")])],1)],1),t(N.Z,{staticClass:"weather-dialog",attrs:{"max-width":"300"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[t(B.Z,{attrs:{elevation:"2"}},[t(E.EB,[e._v(" Weather for "+e._s(e.weather.name)+", "+e._s(e.weather.sys.country)+" ")]),t(E.ZB,[t("div",{staticClass:"center"},[e._v(e._s(Math.round(e.weather.main.temp))+"째F")]),t("div",{staticClass:"center"},[e._v(" "+e._s(e.weather.weather[0].main)),t(g.Z,[e._v(e._s(e.getIcon()))])],1),t("div",[e._v("Feels Like "+e._s(e.weather.main.feels_like)+"째")]),t("div",[e._v("Humidity: "+e._s(e.weather.main.humidity)+"%")]),t("div",[e._v("Wind: "+e._s(e.weather.wind.speed)+"mph")])]),t(E.h7,[t(T.Z),t(p.Z,{attrs:{text:""},on:{click:function(t){t.stopPropagation(),e.dialog=!1}}},[t(g.Z,[e._v("mdi-arrow-left")])],1)],1)],1)],1)],1)},q=[],W={data(){return{api_key:"8b81c25b4594c01f9e7d4caec4793f7a",url_base:"https://api.openweathermap.org/data/2.5/",weather:{},dialog:!1}},created(){this.fetchWeather()},methods:{fetchWeather(){fetch(`${this.url_base}weather?lat=${Number(y.get("Latitude"))}&lon=${Number(y.get("Longitude"))}&units=imperial&APPID=${this.api_key}`).then((e=>e.json())).then(this.setResults)},setResults(e){this.weather=e},dateBuilder(){let e=new Date,t=["January","Feburary","March","April","May","June","July","August","September","October","November","December"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return`${a[e.getDay()]}, ${e.getDate()} ${t[e.getMonth()]} ${e.getFullYear()}`},getIcon(){switch(this.weather.weather[0].main){case"Rain":return"mdi-weather-pouring";case"light rain":return"mdi-weather-rainy";case"Clouds":return"mdi-weather-cloudy";case"Mist":return"mdi-weather-fog";case"Haze":return"mdi-weather-cloudy-alert";default:return"mdi-weather-sunny"}}}},j=W,D=(0,n.Z)(j,A,q,!1,null,null,null),F=D.exports,H={data:()=>({}),components:{MapComponent:I,WeatherCard:F},created(){document.title="TravelApp - Search"},mounted(){document.getElementById("site-link").href=this.website},methods:{home(){this.$router.push({name:"home"})}},computed:{lat:{get(){return y.get("Latitude")},set(e){y.set("Latitude",e)}},lng:{get(){return y.get("Longitude")},set(e){y.set("Longitude",e)}},budget:{get(){return y.get("Budget")},set(e){y.set("Budget",e)}},website:{get(){return y.get("Website")},set(e){y.set("Website",e)}}}},J=H,z=(0,n.Z)(J,P,S,!1,null,"1e3634bb",null),V=z.exports,Y=a(3240),G=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-form-container"},[t(B.Z,{staticClass:"card-container pb-2 px-2",attrs:{width:"400",dark:""}},[t(p.Z,{staticStyle:{position:"absolute",left:"0",top:"0"},attrs:{text:""},on:{click:e.home}},[t(g.Z,{staticClass:"mr-1",attrs:{small:""}},[e._v("mdi-arrow-left")]),e._v(" Home ")],1),t(E.EB,{staticClass:"center mt-1 mb-3"},[t("h1",[e._v(" Login ")])]),t(E.ZB,[t(Y.Z,{ref:"form",attrs:{"lazy-validation":""}},[t(f.Z,{attrs:{rules:e.nameRules,"prepend-icon":"mdi-account",filled:"",label:"Name"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),t(f.Z,{attrs:{type:e.showPassword?"text":"password","append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",rules:e.passwordRules,"prepend-icon":"mdi-lock",label:"Password",filled:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t("div",{staticClass:"text-h6 red--text"},[e._v(" "+e._s(e.error)+" ")])],1),t(E.h7,[t(p.Z,{attrs:{color:"primary"},on:{click:e.login}},[e._v(" Login ")]),t(T.Z),t(p.Z,{attrs:{text:""},on:{click:e.register}},[e._v(" Register here ")])],1)],1)],1)},U=[],K={data:()=>({username:"",password:"",showPassword:!1,error:"",nameRules:[e=>!!e||"Name is required"],passwordRules:[e=>!!e||"Password is required"]}),methods:{login(){this.$refs.form.validate()&&this.axios.post("/api/auth/login",{username:this.username,password:this.password}).then((e=>{console.log(e.data),e.data.authed?(localStorage.setItem("username",this.username),this.$router.push({name:"home"})):this.error="Invalid username or password"})).catch((e=>{console.log(e)}))},register(){this.$router.push({name:"register"})},home(){this.$router.push({name:"home"})}},watch:{error(){this.error&&setTimeout((()=>{this.error=""}),3e3)}}},Q=K,X=(0,n.Z)(Q,G,U,!1,null,"4ffaf0a6",null),ee=X.exports,te=function(){var e=this,t=e._self._c;return t("div",{staticClass:"register-form-container"},[t(B.Z,{staticClass:"card-container pb-2 px-2",attrs:{width:"400",dark:""}},[t(p.Z,{staticStyle:{position:"absolute",left:"0",top:"0"},attrs:{text:""},on:{click:e.home}},[t(g.Z,{staticClass:"mr-1",attrs:{small:""}},[e._v("mdi-arrow-left")]),e._v(" Home ")],1),t(E.EB,{staticClass:"center mb-3"},[t("h1",[e._v(" Register ")])]),t(E.ZB,[t(Y.Z,{ref:"form",attrs:{"lazy-validation":""}},[t(f.Z,{attrs:{rules:e.nameRules,label:"Name","prepend-icon":"mdi-account",filled:"",required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),t(f.Z,{attrs:{rules:e.emailRules,label:"E-mail","prepend-icon":"mdi-email",required:"",filled:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),t(f.Z,{attrs:{"append-icon":e.showPassword?"mdi-eye":"mdi-eye-off",rules:e.passwordRules,type:e.showPassword?"text":"password",label:"Password","prepend-icon":"mdi-lock",filled:"",required:""},on:{"click:append":function(t){e.showPassword=!e.showPassword}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t(f.Z,{attrs:{rules:e.password2Rules,type:e.showPassword?"text":"password",label:"Re-enter Password",required:"","prepend-icon":"mdi-redo-variant",filled:""},on:{"click:append":function(t){e.showPassword2=!e.showPassword2}},model:{value:e.password2,callback:function(t){e.password2=t},expression:"password2"}})],1),t("div",{staticClass:"text-h6 red--text"},[e._v(" "+e._s(e.error)+" ")])],1),t(E.h7,[t(p.Z,{attrs:{color:"primary"},on:{click:e.register}},[e._v(" Register ")]),t(T.Z),t(p.Z,{attrs:{text:""},on:{click:e.login}},[e._v(" Login here ")])],1)],1)],1)},ae=[],re={data(){return{name:"",nameRules:[e=>!!e||"Name is required",e=>e&&e.length<=10||"Name must be less than 10 characters"],email:"",emailRules:[e=>!!e||"E-mail is required",e=>/.+@.+\..+/.test(e)||"E-mail must be valid"],password:"",passwordRules:[e=>!!e||"Password is required",e=>e&&e.length>=6||"Password must be greater than 6 characters"],showPassword:!1,password2:"",password2Rules:[e=>e===this.password||"Passwords must match"],error:""}},methods:{register(){this.$refs.form.validate()&&this.axios.post("/api/auth/register",{username:this.name,email:this.email,password:this.password}).then((e=>{e.data.user?(console.log(e.data.user),this.$router.push({name:"login"})):this.error=e.data.error})).catch((e=>{console.log(e)}))},login(){this.$router.push({name:"login"})},home(){this.$router.push({name:"home"})}},watch:{name(){this.error=""},email(){this.error=""},password(){this.error=""},password2(){this.error=""},error(e){e&&setTimeout((()=>{this.error=""}),3e3)}}},se=re,oe=(0,n.Z)(se,te,ae,!1,null,"7f9c1965",null),ie=oe.exports,ne=function(){var e=this;e._self._c;return e._m(0)},le=[function(){var e=this,t=e._self._c;return t("div",[t("p",{staticClass:"center",attrs:{id:"err-num"}},[e._v("404")]),t("p",{staticClass:"center"},[e._v("Whoops! Looks like an error has occurred.")])])}],ce={mounted(){document.title="404",y.set("timesRefreshed",String(Number(y.get("timesRefreshed"))+1)),window.addEventListener("unload",this.goHome())},beforeDestroy(){window.removeEventListener("unload",this.goHome())},methods:{goHome(){let e=Number(y.get("timesRefreshed"));e>=2&&(this.$router.push({name:"home"}),y.set("timesRefreshed","0"))}}},ue=ce,de=(0,n.Z)(ue,ne,le,!1,null,"e0e2a6a8",null),he=de.exports,me=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("main",[t("div",{staticClass:"search-box"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],staticClass:"search-bar",attrs:{type:"text",placeholder:"Search..."},domProps:{value:e.query},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fetchWeather.apply(null,arguments)},input:function(t){t.target.composing||(e.query=t.target.value)}}})]),"undefined"!=typeof e.weather.main?t("div",{staticClass:"weather-wrap"},[t("div",{staticClass:"location-box"},[t("div",{staticClass:"location"},[e._v(e._s(e.weather.name)+", "+e._s(e.weather.sys.state)+" "+e._s(e.weather.sys.country))]),t("div",{staticClass:"date"},[e._v(e._s(e.dateBuilder()))]),t("div",{staticClass:"weather-box"},[t("div",{staticClass:"temp"},[e._v(e._s(Math.round(e.weather.main.temp))+" 째F")]),t("div",{staticClass:"weather"},[e._v(" "+e._s(e.weather)+" ")])])])]):e._e()])])},pe=[],ge={data(){return{api_key:"8b81c25b4594c01f9e7d4caec4793f7a",url_base:"https://api.openweathermap.org/data/2.5/",query:"",weather:{}}},methods:{fetchWeather(){fetch(`${this.url_base}weather?q=${this.query}&units=imperial&APPID=${this.api_key}`).then((e=>e.json())).then(this.setResults)},setResults(e){this.weather=e},dateBuilder(){let e=new Date,t=["January","Feburary","March","April","May","June","July","August","September","October","November","December"],a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];return`${a[e.getDay()]}, ${e.getDate()} ${t[e.getMonth()]} ${e.getFullYear()}`}}},fe=ge,ve=(0,n.Z)(fe,me,pe,!1,null,null,null),we=ve.exports,ye=function(){var e=this,t=e._self._c;return t("div",{staticClass:"profile-container"},[t("div",{staticClass:"title-card-container"},[t("div",{staticClass:"text-h5 font-weight-black white--text"},[e._v(" Your Profile: ")]),t(B.Z,{staticClass:"card-container pb-2 px-2",attrs:{width:"400",dark:""}},[t("h1",{staticClass:"text-h3 font-weight-black my-5"},[e._v(" "+e._s(e.user)+" ")]),t("div",{staticClass:"recent-activity-feed mb-5"},[t("div",{staticClass:"text-h5 font-weight-black center"},[e._v(" Recent Searches: ")]),t("div",{staticClass:"recent-activity-feed-container"},e._l(e.recentActivity,(function(a){return t("div",{key:a.id},[t("div",{staticClass:"center search-item",staticStyle:{cursor:"pointer"}},[t(g.Z,{attrs:{color:"info"}},[e._v(" mdi-map-marker ")]),t("b",{on:{click:function(t){return e.redirectToSearch(a)}}},[e._v(" "+e._s(a.name)+" ")])],1)])})),0)]),t("div",{staticClass:"text-h6 font-weight-black"},[e._v(" Registered Email Address: ")]),t("p",[e._v(" "+e._s(e.email)+" ")]),t(E.h7,{staticClass:"card-actions"},[t(p.Z,{attrs:{text:""},on:{click:e.back}},[t(g.Z,{staticClass:"mr-2"},[e._v("mdi-arrow-left")]),e._v(" Back ")],1),t(T.Z),t(p.Z,{attrs:{color:"error",text:""},on:{click:e.logout}},[t(g.Z,{staticClass:"mr-2"},[e._v("mdi-account-off")]),e._v(" Log Out ")],1)],1)],1)],1)])},_e=[],be={data(){return{user:localStorage.getItem("username"),email:"fetching..."}},mounted(){this.axios.get("/api/auth/email/"+this.user).then((e=>{console.log(e.data),this.email=e.data.email})).catch((e=>{console.log(e)}))},computed:{recentActivity(){return b()}},methods:{logout(){localStorage.clear(),this.$router.push({name:"home"})},back(){this.$router.push({name:"home"})},redirectToSearch(e){y.set("Latitude",e.lat),y.set("Longitude",e.lng),this.$router.push({name:"search"})}}},ke=be,Ze=(0,n.Z)(ke,ye,_e,!1,null,"3598ca24",null),xe=Ze.exports;r.ZP.use(m.ZP);const Ce=[{path:"/",name:"home",component:C},{path:"/search",name:"search",component:V},{path:"/login",name:"login",component:ee},{path:"/register",name:"register",component:ie},{path:"/profile",name:"profile",component:xe},{path:"/weather",name:"weather",component:we},{path:"/*",name:"404",component:he}],Pe=new m.ZP({mode:"history",base:"/",routes:Ce});var Se=Pe,$e=a(6292),Re=a(594),Le=a(2346);r.ZP.config.productionTip=!1,r.ZP.use($e,{load:{key:"AIzaSyCVIPBOnwLEp4CedTebu3hjBnVMWaWyhp0",libraries:"places"}}),r.ZP.use(Le.Z,Re.Z),new r.ZP({vuetify:h,router:Se,render:e=>e(u)}).$mount("#app")}},t={};function a(r){var s=t[r];if(void 0!==s)return s.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r](o,o.exports,a),o.loaded=!0,o.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,r,s,o){if(!r){var i=1/0;for(u=0;u<e.length;u++){r=e[u][0],s=e[u][1],o=e[u][2];for(var n=!0,l=0;l<r.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(n=!1,o<i&&(i=o));if(n){e.splice(u--,1);var c=s();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[r,s,o]}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,o,i=r[0],n=r[1],l=r[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(s in n)a.o(n,s)&&(a.m[s]=n[s]);if(l)var u=l(a)}for(t&&t(r);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},r=self["webpackChunktravelapp"]=self["webpackChunktravelapp"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998],(function(){return a(7723)}));r=a.O(r)})();
//# sourceMappingURL=app.c6d10a68.js.map